<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Drive Playlist Player</title>
    <link id="favicon" rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* CSS Lengkap - Tidak ada perubahan dari versi responsif sebelumnya */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
        :root{--background-color:#121212;--player-background:#1e1e1e;--primary-text-color:#ffffff;--secondary-text-color:#b3b3b3;--accent-color:#4285F4;--highlight-color:#2a2a2a;--border-radius:12px;}
        body{background-color:var(--background-color);color:var(--primary-text-color);font-family:'Poppins',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px;box-sizing:border-box;}
        .main-wrapper{display:flex;flex-direction:row;gap:20px;width:100%;max-width:800px;align-items:flex-start;}
        .music-container,.playlist-container{background-color:var(--player-background);border-radius:var(--border-radius);padding:25px 30px;width:100%;box-sizing:border-box;box-shadow:0 4px 30px rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.1);}
        .music-container{text-align:center;flex-shrink:0;width:380px;}
        .playlist-container{flex-grow:1;max-height:480px;}
        @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        .album-art{width:200px;height:200px;margin:0 auto 25px auto;object-fit:cover;background-color:#333;border-radius:50%;border:8px solid #282828;box-shadow:0 0 15px rgba(0,0,0,0.6);animation:spin 10s linear infinite;animation-play-state:paused;}
        .album-art.playing{animation-play-state:running;}
        #song-title{font-size:1.5em;font-weight:600;margin:0 0 5px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
        #song-artist{font-size:1em;color:var(--secondary-text-color);margin-bottom:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
        .progress-container{width:100%;margin-bottom:10px;}
        #progress-bar{width:100%;cursor:pointer;}
        .time-display{display:flex;justify-content:space-between;font-size:0.8em;color:var(--secondary-text-color);padding:0 5px;margin-bottom:20px;}
        .all-controls{display:flex;align-items:center;justify-content:space-between;gap:15px;}
        .main-controls{display:flex;align-items:center;justify-content:center;gap:15px;flex-grow:1;}
        .control-btn{background:none;border:none;color:var(--secondary-text-color);font-size:18px;cursor:pointer;transition:color .2s ease;}
        .control-btn:hover{color:var(--primary-text-color);}
        .control-btn.active{color:var(--accent-color);}
        .play-btn{background-color:var(--primary-text-color);color:#121212;border:none;border-radius:50%;width:50px;height:50px;font-size:20px;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:transform .2s ease;}
        .play-btn:hover{transform:scale(1.1)}
        .volume-container{display:flex;align-items:center;gap:8px;}
        #volume-slider{width:70px;}
        .playlist-container h3{margin-top:0;font-size:1em;color:var(--secondary-text-color);text-align:left;}
        #playlist{list-style:none;padding:0;margin:0;max-height:350px;overflow-y:auto;}
        #playlist li{padding:12px 15px;border-radius:8px;margin-bottom:8px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s ease;}
        #playlist li:hover{background-color:var(--highlight-color);}
        #playlist li.active-song{background-color:var(--accent-color);color:white;font-weight:600;}
        #playlist .song-details{display:flex;flex-direction:column;text-align:left;}
        #playlist .song-title{font-size:1em;}
        #playlist .song-artist{font-size:0.8em;opacity:.7;}
        @media (max-width:768px){.main-wrapper{flex-direction:column;max-width:380px}.music-container,.playlist-container{width:100%}.playlist-container{max-height:250px}}
    </style>
</head>
<body>
    
    <div class="main-wrapper">
        <div class="music-container">
            <audio id="audio-player" crossorigin="anonymous"></audio>
            
            <img src="https://ssl.gstatic.com/docs/doclist/images/mediatype/icon_1_audio_x128.png" alt="Album Art" id="album-art" class="album-art">
            <h2 id="song-title">Pilih Lagu</h2>
            <p id="song-artist">dari Daftar Putar</p>

            <div class="progress-container"><input type="range" id="progress-bar" value="0"></div>
            <div class="time-display"><span id="current-time">0:00</span><span id="duration">0:00</span></div>

            <div class="all-controls">
                <div class="main-controls">
                    <button id="prev-btn" class="control-btn"><i class="fa-solid fa-backward-step"></i></button>
                    <button id="play-pause-btn" class="play-btn"><i class="fas fa-play" id="play-pause-icon"></i></button>
                    <button id="next-btn" class="control-btn"><i class="fa-solid fa-forward-step"></i></button>
                    <button id="loop-btn" class="control-btn"><i class="fa-solid fa-repeat"></i></button>
                </div>
                <div class="volume-container">
                    <button id="volume-icon" class="control-btn"><i class="fa-solid fa-volume-high"></i></button>
                    <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" class="control-btn">
                </div>
            </div>
        </div>
        
        <div class="playlist-container">
            <h3><i class="fa-solid fa-list-music"></i> Daftar Putar</h3>
            <ul id="playlist"></ul>
        </div>
    </div>

    <script>
        const songPlaylist = [
            // Kamu bisa menambahkan lagu lain di sini
            { title: "Komang", artist: "Raim Laode", driveId: '1CgSIJWX3Kbei46Zg-qAFZYaGflMNsnon' },
            { title: "Lagu Lain", artist: "Artis Lain", driveId: 'GANTI_DENGAN_ID_DARI_GOOGLE_DRIVE' },
        ];

        // Mendefinisikan semua elemen
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playPauseIcon = document.getElementById('play-pause-icon');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const loopBtn = document.getElementById('loop-btn');
        const volumeIcon = document.getElementById('volume-icon');
        const volumeSlider = document.getElementById('volume-slider');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const songTitleEl = document.getElementById('song-title');
        const songArtistEl = document.getElementById('song-artist');
        const albumArtEl = document.getElementById('album-art');
        const playlistEl = document.getElementById('playlist');

        let currentSongIndex = 0;

        // Fungsi untuk memuat lagu
        function loadSong(index) {
            currentSongIndex = index;
            const song = songPlaylist[index];
            songTitleEl.textContent = song.title;
            songArtistEl.textContent = song.artist;
            audioPlayer.src = `https://drive.google.com/uc?export=download&id=${song.driveId}`;
            updatePlaylistUI();
        }

        // Fungsi untuk memutar atau menjeda
        function togglePlayPause() {
            if (audioPlayer.paused) {
                audioPlayer.play();
            } else {
                audioPlayer.pause();
            }
        }
        
        function playNext() {
            currentSongIndex = (currentSongIndex + 1) % songPlaylist.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
        }

        function playPrev() {
            currentSongIndex = (currentSongIndex - 1 + songPlaylist.length) % songPlaylist.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
        }

        // Update UI saat lagu diputar/dijeda
        audioPlayer.addEventListener('play', () => {
            playPauseIcon.className = 'fas fa-pause';
            albumArtEl.classList.add('playing');
            updatePlaylistUI();
        });

        audioPlayer.addEventListener('pause', () => {
            playPauseIcon.className = 'fas fa-play';
            albumArtEl.classList.remove('playing');
            updatePlaylistUI();
        });
        
        // Update progress bar
        audioPlayer.addEventListener('timeupdate', () => {
            const { duration, currentTime } = audioPlayer;
            if (duration) {
                progressBar.value = (currentTime / duration) * 100;
                currentTimeEl.textContent = formatTime(currentTime);
                durationEl.textContent = formatTime(duration);
            }
        });
        
        // Pindah lagu saat progress bar digeser
        progressBar.addEventListener('input', () => {
            audioPlayer.currentTime = (progressBar.value / 100) * audioPlayer.duration;
        });

        // Fungsi loop
        loopBtn.addEventListener('click', () => {
            audioPlayer.loop = !audioPlayer.loop;
            loopBtn.classList.toggle('active', audioPlayer.loop);
        });
        
        // Pindah ke lagu selanjutnya jika sudah selesai
        audioPlayer.addEventListener('ended', () => {
            if (!audioPlayer.loop) {
                playNext();
            }
        });

        // Kontrol volume
        volumeSlider.addEventListener('input', (e) => {
            audioPlayer.volume = e.target.value;
        });

        // Render daftar putar
        function renderPlaylist() {
            playlistEl.innerHTML = '';
            songPlaylist.forEach((song, index) => {
                const li = document.createElement('li');
                li.dataset.index = index;
                li.innerHTML = `<div class="song-details"><span class="song-title">${song.title}</span><span class="song-artist">${song.artist}</span></div><i class="fa-solid fa-play"></i>`;
                li.addEventListener('click', () => {
                    loadSong(index);
                    audioPlayer.play();
                });
                playlistEl.appendChild(li);
            });
        }
        
        // Update UI daftar putar
        function updatePlaylistUI() {
            document.querySelectorAll('#playlist li').forEach((li, idx) => {
                li.classList.toggle('active-song', idx === currentSongIndex);
                const icon = li.querySelector('i');
                if (idx === currentSongIndex && !audioPlayer.paused) {
                    icon.className = 'fa-solid fa-compact-disc fa-spin';
                } else {
                    icon.className = 'fa-solid fa-play';
                }
            });
        }

        function formatTime(s) { const m=Math.floor(s/60),c=Math.floor(s%60); return `${m}:${c<10?'0':''}${c}`; }
        
        // Inisialisasi
        renderPlaylist();
        loadSong(0);

    </script>
</body>
</html>
